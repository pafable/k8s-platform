# Generated by Anaconda 34.25.4.9
# Generated by pykickstart v3.32
#version=OL9
# Use graphical install
graphical

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Use Oracle Linux yum server repositories as installation source
repo --name="ol9_AppStream" --baseurl="https://yum.oracle.com/repo/OracleLinux/OL9/appstream/x86_64/"
repo --name="ol9_UEKR7" --baseurl="https://yum.oracle.com/repo/OracleLinux/OL9/UEKR7/x86_64/"
url --url="https://yum.oracle.com/repo/OracleLinux/OL9/baseos/latest/x86_64"

# Keyboard layouts
keyboard --xlayouts='us'
# System language
lang en_US.UTF-8

%packages
@^server-product-environment
cloud-init
coreutils
epel-release
gcc
git
python3.12
qemu-guest-agent
tmux

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --none --initlabel

# System timezone
timezone America/New_York --utc

# Start services
# qemu-guest-agent is needed to retrieve IP address assigned by DHCP server
services --enabled=qemu-guest-agent

# Root password
rootpw --iscrypted $6$R.6hPx7vys1hw9pT$hhNBTZmUE/dZtmOSU3qEPsmzPIc1ow85fFkBhJYuY5hWuOo.mgkN3wlqWQAqJKeEpb/GxfGwMw0/JF4ISadz10
user --groups=wheel --name=provisioner --password=$6$EDIIAk1vIsi/YSYk$1NJFdAonkSUOJ7yY3BK4UwB9FxefeyQ1M7zU/Hl/iBR2Dym1o7590vS11bg8Z/ein8Ux5HbWHPsHOZHeEhO/31 --iscrypted --gecos="provisioner"

%post
echo "provisioner ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers.d/provisioner
chmod 0400 /etc/sudoers.d/provisioner
%end

reboot