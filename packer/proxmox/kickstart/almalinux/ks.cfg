# Generated by Anaconda 34.25.5.9
# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Use Alma Linux dnf server repositories as installation source
repo --name="AppStream" --baseurl="http://10.0.4.41:9001/repos/almalinux9/appstream/"
repo --name="BaseOS" --baseurl="http://10.0.4.41:9001/repos/almalinux9/baseos/"
repo --name="Epel" --baseurl="http://10.0.4.41:9001/repos/almalinux9/epel/"
repo --name="Extras" --baseurl="http://10.0.4.41:9001/repos/almalinux9/extras/"
url --url="http://10.0.4.41:9001/repos/almalinux9/baseos/"

# Keyboard layouts
keyboard --xlayouts='us'
# System language
lang en_US.UTF-8

# Network information
network  --bootproto=dhcp --device=ens18 --ipv6=auto --activate

%packages
@^server-product-environment
cloud-init
coreutils
epel-release
gcc
git
python3.12
qemu-guest-agent
tmux

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.6.0
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --none --initlabel

# System timezone
timezone America/New_York --utc

#Root password
rootpw --lock
user --groups=wheel --name=phil --password=$6$lKCF2G/CNefSSTn1$r.d660YSsAnqcuop4OsNEf90NXXqTmGlm9X6dUKad.SraYYrF1mnmiPChjl9VkjERbATDGbUpp61tbEMJGt1z1 --iscrypted --gecos="phil"

%post
echo "phil ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers.d/phil
chmod 0400 /etc/sudoers.d/phil
%end

reboot